(function(){"use strict";var e={9488:function(e,t,a){var r=a(8935),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("NavBar"),a("router-view")],1)},n=[],i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("nav",{staticClass:"navbar navbar-expand-sm bg-dark navbar-dark"},[a("div",{staticClass:"container-fluid"},[a("a",{staticClass:"navbar-brand",attrs:{href:"#"}},[a("router-link",{attrs:{to:"/"}},[e._v(" BiskopKece")])],1),e._m(0),a("div",{staticClass:"collapse navbar-collapse",attrs:{id:"collapsibleNavbar"}},[a("ul",{staticClass:"navbar-nav"},[e.email?e._e():a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link"},[a("router-link",{attrs:{to:"/"}},[e._v("Home")])],1)]),e.email?a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link"},[a("router-link",{attrs:{to:"/"}},[e._v("Hi, "+e._s(this.email))])],1)]):e._e(),e.email?e._e():a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link"},[a("li",[a("router-link",{attrs:{to:"/login"}},[e._v("Login")])],1)])]),e.email?a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link"},[a("router-link",{attrs:{to:"/mybookmark"}},[e._v("My Bookmark")])],1)]):e._e(),e.email?a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",on:{click:e.logout}},[a("router-link",{attrs:{to:"/"}},[e._v("Log Out")])],1)]):e._e()])])])])},s=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapsibleNavbar"}},[a("span",{staticClass:"navbar-toggler-icon"})])}],l=a(7099),c=a.n(l),u={name:"NavBar",methods:{logout(){c().fire({icon:"success",title:"Log Out Success",showConfirmButton:!1,timer:1500}),localStorage.clear(),localStorage.removeItem("access_token"),localStorage.removeItem("email"),this.$store.commit("SET_EMAIL","")}},computed:{email(){return this.$store.state.email}}},m=u,d=a(1001),v=(0,d.Z)(m,i,s,!1,null,null,null),h=v.exports,p={name:"App",components:{NavBar:h}},f=p,g=(0,d.Z)(f,o,n,!1,null,null,null),b=g.exports,_=a(2809),k=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("MoviesList")],1)},y=[],C=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("br"),a("br"),a("div",[a("form",{on:{submit:function(t){return t.preventDefault(),e.search.apply(null,arguments)}}},[a("div",{staticClass:"form-group has-search"},[a("span",{staticClass:"fa fa-search form-control-feedback"}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.query.title,expression:"query.title"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Search"},domProps:{value:e.query.title},on:{input:function(t){t.target.composing||e.$set(e.query,"title",t.target.value)}}})]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.query.genre,expression:"query.genre"}],staticClass:"form-select form-select-lg col-md-4",attrs:{"aria-label":"Genre Search"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.query,"genre",t.target.multiple?a:a[0])}}},[e._m(0),a("option",{attrs:{value:"Horror"}},[e._v("Horror")]),a("option",{attrs:{value:"Action"}},[e._v("Action")]),a("option",{attrs:{value:"Drama"}},[e._v("Drama")]),a("option",{attrs:{value:"Comedy"}},[e._v("Comedy")]),a("option",{attrs:{value:"Romance"}},[e._v("Romance")]),a("option",{attrs:{value:"Thriller"}},[e._v("Thriller")]),a("option",{attrs:{value:"Sci-Fiction"}},[e._v("Sci-Fiction")])]),a("br"),a("br"),a("button",{staticClass:"btn btn-outline-secondary col-sm-1",attrs:{type:"submit"}},[e._v("Search")])])]),a("h1",{staticClass:"text-center mb-3"},[e._v("Movies")]),a("div",{staticClass:"row justify-content-start"},e._l(e.movies,(function(e){return a("MoviesItem",{key:e.id,attrs:{movie:e}})})),1),a("br"),a("center",[!0===this.query.clear?a("div",[a("a",{attrs:{href:""},on:{click:function(t){return t.preventDefault(),e.clearSearch.apply(null,arguments)}}},[e._v("Clear Search")])]):e._e()]),a("br"),a("br"),a("br"),0!==e.movies.length?a("nav",{attrs:{"aria-label":"Page navigation example"}},[e.totalPage>0?a("ul",{staticClass:"pagination justify-content-center"},e._l(e.totalPage,(function(t){return a("li",{key:t,staticClass:"page-item"},[a("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),e.nextPage(t)}}},[e._v(e._s(t))])])})),0):e._e()]):e._e()],1)},E=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("option",{attrs:{value:""}},[a("label",[e._v("Choose Genre Movie")])])}],S=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-3"},[a("div",{staticClass:"card mx-auto my-2",staticStyle:{width:"12rem"}},[a("img",{staticClass:"card-img-top",attrs:{src:e.movie.imgUrl}}),a("div",{staticClass:"card-body card-body"},[a("h5",{staticClass:"card-title"},[a("router-link",{attrs:{to:"/detail/"+e.movie.id}},[e._v(e._s(e.movie.title))])],1),a("p",{staticClass:"card-text"},[e._v(" Rating: "+e._s(e.movie.rating))]),a("p",{staticClass:"card-text"},[e._v(" Genre: "+e._s(e.movie.Genre.name))]),e.email?a("a",{staticClass:"btn btn-primary",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.addToBookmark(e.movie.id)}}},[a("i",{staticClass:"fas fa-heart fa-lg mr-2",attrs:{"aria-hidden":"true"}})]):e._e()])])])},T=[],$={name:"MoviesItem",props:["movie"],data(){return{id:0}},computed:{email(){return this.$store.state.email}},methods:{addToBookmark(e){this.$store.dispatch("addBookmark",e)}},created(){this.$store.dispatch("getqrCode")}},O=$,M=(0,d.Z)(O,S,T,!1,null,null,null),P=M.exports,w={name:"MoviesList",components:{MoviesItem:P},data(){return{query:{page:1,title:"",genre:"",clear:!1}}},computed:{movies(){return this.$store.state.movies},totalPage(){return this.$store.state.totalPage}},methods:{nextPage(e){this.query.page=e,this.$store.dispatch("MoviesPage",this.query)},addToBookmark(e){this.$store.dispatch("addBookmark",e)},search(){this.query.page=1,this.query.clear=!0,this.$store.dispatch("MoviesPage",this.query)},clearSearch(){this.page=0,this.query.title="",this.query.genre="",this.query.clear=!1,this.$store.dispatch("MoviesPage",this.query)}},created(){this.$store.commit("SET_EMAIL",localStorage.getItem("email")),this.$store.dispatch("getMovies"),this.$store.dispatch("MoviesPage",this.query)}},q=w,I=(0,d.Z)(q,C,E,!1,null,null,null),A=I.exports,B={name:"HomePage",components:{MoviesList:A}},x=B,L=(0,d.Z)(x,k,y,!1,null,null,null),N=L.exports;r.Z.use(_.Z);const U=[{path:"/",name:"home",component:N},{path:"/login",name:"login",component:()=>a.e(735).then(a.bind(a,6735))},{path:"/mybookmark",name:"BookmarkPage",component:()=>a.e(471).then(a.bind(a,471))},{path:"/register",name:"register",component:()=>a.e(125).then(a.bind(a,1125))},{path:"/detail/:id",name:"detail",component:()=>a.e(129).then(a.bind(a,7129))}],Z=new _.Z({mode:"history",base:"/",routes:U});Z.beforeEach(((e,t,a)=>{localStorage.getItem("access_token")&&"login"===e.name||localStorage.getItem("access_token")&&"register"===e.name?a({name:"home"}):localStorage.getItem("access_token")||"BookmarkPage"!==e.name?a():a({name:"home"})}));var j=Z,G=a(4665),R=a(6166),D=a.n(R);r.Z.use(G.ZP);var F=new G.ZP.Store({state:{baseUrl:"https://biskopkece.herokuapp.com",email:"",movies:[],bookmark:[],totalPage:0,movie:[],qrcode:[]},mutations:{SET_EMAIL(e,t){e.email=t},SET_MOVIES(e,t){e.movies=t},SET_BOOKMARK(e,t){e.bookmark=t},SET_TOTALPAGE(e,t){e.totalPage=t},SET_MOVIE(e,t){e.movie=t},SET_QRCODE(e,t){e.qrcode=t}},actions:{login(e,t){return D()({url:`${this.state.baseUrl}/customers/login`,method:"POST",data:t})},onSignIn(e,t){D()({url:`${this.state.baseUrl}/customers/google-sign-in`,method:"POST",data:{id_token:t}}).then((({data:t})=>{localStorage.setItem("access_token",t.access_token),localStorage.setItem("email",t.email),e.commit("SET_EMAIL",t.email),c().fire({icon:"success",title:`Welcome to ${this.data.email}`,showConfirmButton:!1,timer:1500})})).catch((e=>{console.log(e.response)}))},register(e,t){D()({url:`${this.state.baseUrl}/customers/register`,method:"POST",data:{email:t.email,password:t.password,phoneNumber:t.phoneNumber,address:t.address}}).then((()=>{c().fire({icon:"success",title:"Register Success",showConfirmButton:!1,timer:1500})})).catch((e=>{c().fire({icon:"error",title:"Oops...",text:e.response.data.messages})}))},getMovies(e){D()({url:`${this.state.baseUrl}/movies/pub/pag`,method:"GET"}).then((({data:t})=>{e.commit("SET_MOVIES",t.Movies),e.commit("SET_TOTALPAGE",t.totalPages)})).catch((e=>{console.log(e)}))},MoviesPage(e,t){D()({url:`${this.state.baseUrl}/movies/pub/pag?page=${t.page}&genre=${t.genre}&title=${t.title}`,method:"GET"}).then((({data:t})=>{e.commit("SET_MOVIES",t.Movies),e.commit("SET_TOTALPAGE",t.totalPage)})).catch((e=>{console.log(e)}))},addBookmark(e,t){D()({url:`${this.state.baseUrl}/movies/${t}/bookmark`,method:"POST",headers:{access_token:localStorage.getItem("access_token")}}).then((({data:e})=>{c().fire({icon:"success",title:`Movie with id ${e.data.movieId} added to bookmark`,showConfirmButton:!1,timer:1500})})).catch((e=>{const t=e.response.data.messages;c().fire({icon:"error",title:t,showConfirmButton:!1,timer:1500})}))},getBookmark(e){D()({url:`${this.state.baseUrl}/movies/bookmark`,method:"GET",headers:{access_token:localStorage.getItem("access_token")}}).then((({data:t})=>{localStorage.setItem("email",t[0].User.email),e.commit("SET_EMAIL",t[0].User.email),e.commit("SET_BOOKMARK",t)})).catch((e=>{console.log(e)}))},detailMovies(e,t){D()({url:`${this.state.baseUrl}/movies/pub/${t}`,method:"GET"}).then((({data:t})=>{e.commit("SET_MOVIE",t.movie)})).catch((e=>{console.log(e)}))},getqrCode(e,t){D()({url:`https://api.happi.dev/v1/qrcode?data=${this.state.baseUrl}/detail/${t}&width=&dots=000000&bg=FFFFFF&apikey=ddbf4bZrnLOMh3TboEIceE7urXDLqrwqRBGGl0zIdYNaD31ckNpTIybR`,method:"GET"}).then((({data:t})=>{console.log(t.qrcode),e.commit("SET_QRCODE",t.qrcode)})).catch((e=>{c().fire({icon:"error",title:"QR CODE ERROR",showConfirmButton:!1,timer:1500})}))}}});r.Z.prototype.$baseUrl="http://localhost:3000",r.Z.config.productionTip=!1,new r.Z({render:e=>e(b),store:F,router:j}).$mount("#app")}},t={};function a(r){var o=t[r];if(void 0!==o)return o.exports;var n=t[r]={exports:{}};return e[r].call(n.exports,n,n.exports,a),n.exports}a.m=e,function(){var e=[];a.O=function(t,r,o,n){if(!r){var i=1/0;for(u=0;u<e.length;u++){r=e[u][0],o=e[u][1],n=e[u][2];for(var s=!0,l=0;l<r.length;l++)(!1&n||i>=n)&&Object.keys(a.O).every((function(e){return a.O[e](r[l])}))?r.splice(l--,1):(s=!1,n<i&&(i=n));if(s){e.splice(u--,1);var c=o();void 0!==c&&(t=c)}}return t}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[r,o,n]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){a.f={},a.e=function(e){return Promise.all(Object.keys(a.f).reduce((function(t,r){return a.f[r](e,t),t}),[]))}}(),function(){a.u=function(e){return"js/"+e+"."+{125:"c75e61e4",129:"6b1dc955",471:"a45f7cfc",735:"e635821c"}[e]+".js"}}(),function(){a.miniCssF=function(e){return"css/"+e+".dbbef820.css"}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="movie:";a.l=function(r,o,n,i){if(e[r])e[r].push(o);else{var s,l;if(void 0!==n)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var m=c[u];if(m.getAttribute("src")==r||m.getAttribute("data-webpack")==t+n){s=m;break}}s||(l=!0,s=document.createElement("script"),s.charset="utf-8",s.timeout=120,a.nc&&s.setAttribute("nonce",a.nc),s.setAttribute("data-webpack",t+n),s.src=r),e[r]=[o];var d=function(t,a){s.onerror=s.onload=null,clearTimeout(v);var o=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),o&&o.forEach((function(e){return e(a)})),t)return t(a)},v=setTimeout(d.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=d.bind(null,s.onerror),s.onload=d.bind(null,s.onload),l&&document.head.appendChild(s)}}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p="/"}(),function(){var e=function(e,t,a,r){var o=document.createElement("link");o.rel="stylesheet",o.type="text/css";var n=function(n){if(o.onerror=o.onload=null,"load"===n.type)a();else{var i=n&&("load"===n.type?"missing":n.type),s=n&&n.target&&n.target.href||t,l=new Error("Loading CSS chunk "+e+" failed.\n("+s+")");l.code="CSS_CHUNK_LOAD_FAILED",l.type=i,l.request=s,o.parentNode.removeChild(o),r(l)}};return o.onerror=o.onload=n,o.href=t,document.head.appendChild(o),o},t=function(e,t){for(var a=document.getElementsByTagName("link"),r=0;r<a.length;r++){var o=a[r],n=o.getAttribute("data-href")||o.getAttribute("href");if("stylesheet"===o.rel&&(n===e||n===t))return o}var i=document.getElementsByTagName("style");for(r=0;r<i.length;r++){o=i[r],n=o.getAttribute("data-href");if(n===e||n===t)return o}},r=function(r){return new Promise((function(o,n){var i=a.miniCssF(r),s=a.p+i;if(t(i,s))return o();e(r,s,o,n)}))},o={143:0};a.f.miniCss=function(e,t){var a={125:1};o[e]?t.push(o[e]):0!==o[e]&&a[e]&&t.push(o[e]=r(e).then((function(){o[e]=0}),(function(t){throw delete o[e],t})))}}(),function(){var e={143:0};a.f.j=function(t,r){var o=a.o(e,t)?e[t]:void 0;if(0!==o)if(o)r.push(o[2]);else{var n=new Promise((function(a,r){o=e[t]=[a,r]}));r.push(o[2]=n);var i=a.p+a.u(t),s=new Error,l=function(r){if(a.o(e,t)&&(o=e[t],0!==o&&(e[t]=void 0),o)){var n=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+n+": "+i+")",s.name="ChunkLoadError",s.type=n,s.request=i,o[1](s)}};a.l(i,l,"chunk-"+t,t)}},a.O.j=function(t){return 0===e[t]};var t=function(t,r){var o,n,i=r[0],s=r[1],l=r[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(o in s)a.o(s,o)&&(a.m[o]=s[o]);if(l)var u=l(a)}for(t&&t(r);c<i.length;c++)n=i[c],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(u)},r=self["webpackChunkmovie"]=self["webpackChunkmovie"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=a.O(void 0,[998],(function(){return a(9488)}));r=a.O(r)})();
//# sourceMappingURL=app.6773bc8a.js.map