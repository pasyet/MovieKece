(function(){"use strict";var t={9488:function(t,e,a){a(6992),a(8674),a(9601),a(7727);var n=a(8935),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("NavBar"),a("router-view")],1)},r=[],i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",{staticClass:"navbar navbar-expand-sm bg-dark navbar-dark"},[a("div",{staticClass:"container-fluid"},[a("a",{staticClass:"navbar-brand",attrs:{href:"#"}},[a("router-link",{attrs:{to:"/"}},[t._v(" BiskopKece")])],1),t._m(0),a("div",{staticClass:"collapse navbar-collapse",attrs:{id:"collapsibleNavbar"}},[a("ul",{staticClass:"navbar-nav"},[t.email?t._e():a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link"},[a("router-link",{attrs:{to:"/"}},[t._v("Home")])],1)]),t.email?a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link"},[a("router-link",{attrs:{to:"/"}},[t._v("Hi, "+t._s(this.email))])],1)]):t._e(),t.email?t._e():a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link"},[a("li",[a("router-link",{attrs:{to:"/login"}},[t._v("Login")])],1)])]),t.email?a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link"},[a("router-link",{attrs:{to:"/mybookmark"}},[t._v("My Bookmark")])],1)]):t._e(),t.email?a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",on:{click:t.logout}},[a("router-link",{attrs:{to:"/"}},[t._v("Log Out")])],1)]):t._e()])])])])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapsibleNavbar"}},[a("span",{staticClass:"navbar-toggler-icon"})])}],c=a(7099),l=a.n(c),u={name:"NavBar",methods:{logout:function(){l().fire({icon:"success",title:"Log Out Success",showConfirmButton:!1,timer:1500}),localStorage.clear(),localStorage.removeItem("access_token"),localStorage.removeItem("email"),this.$store.commit("SET_EMAIL","")}},computed:{email:function(){return this.$store.state.email}}},m=u,f=a(1001),d=(0,f.Z)(m,i,s,!1,null,null,null),v=d.exports,h={name:"App",components:{NavBar:v}},p=h,g=(0,f.Z)(p,o,r,!1,null,null,null),b=g.exports,_=(a(1539),a(8783),a(3948),a(8309),a(2809)),k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("MoviesList")],1)},y=[],C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("br"),a("br"),a("div",[a("form",{on:{submit:function(e){return e.preventDefault(),t.search.apply(null,arguments)}}},[a("div",{staticClass:"form-group has-search"},[a("span",{staticClass:"fa fa-search form-control-feedback"}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.query.title,expression:"query.title"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Search"},domProps:{value:t.query.title},on:{input:function(e){e.target.composing||t.$set(t.query,"title",e.target.value)}}})]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.query.genre,expression:"query.genre"}],staticClass:"form-select form-select-lg col-md-4",attrs:{"aria-label":"Genre Search"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.query,"genre",e.target.multiple?a:a[0])}}},[t._m(0),a("option",{attrs:{value:"Horror"}},[t._v("Horror")]),a("option",{attrs:{value:"Action"}},[t._v("Action")]),a("option",{attrs:{value:"Drama"}},[t._v("Drama")]),a("option",{attrs:{value:"Comedy"}},[t._v("Comedy")]),a("option",{attrs:{value:"Romance"}},[t._v("Romance")]),a("option",{attrs:{value:"Thriller"}},[t._v("Thriller")]),a("option",{attrs:{value:"Sci-Fiction"}},[t._v("Sci-Fiction")])]),a("br"),a("br"),a("button",{staticClass:"btn btn-outline-secondary col-sm-1",attrs:{type:"submit"}},[t._v("Search")])])]),a("h1",{staticClass:"text-center mb-3"},[t._v("Movies")]),a("div",{staticClass:"row justify-content-start"},t._l(t.movies,(function(t){return a("MoviesItem",{key:t.id,attrs:{movie:t}})})),1),a("br"),a("center",[!0===this.query.clear?a("div",[a("a",{attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.clearSearch.apply(null,arguments)}}},[t._v("Clear Search")])]):t._e()]),a("br"),a("br"),a("br"),0!==t.movies.length?a("nav",{attrs:{"aria-label":"Page navigation example"}},[t.totalPage>0?a("ul",{staticClass:"pagination justify-content-center"},t._l(t.totalPage,(function(e){return a("li",{key:e,staticClass:"page-item"},[a("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.nextPage(e)}}},[t._v(t._s(e))])])})),0):t._e()]):t._e()],1)},E=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("option",{attrs:{value:""}},[a("label",[t._v("Choose Genre Movie")])])}],S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-3"},[a("div",{staticClass:"card mx-auto my-2",staticStyle:{width:"12rem"}},[a("img",{staticClass:"card-img-top",attrs:{src:t.movie.imgUrl}}),a("div",{staticClass:"card-body card-body"},[a("h5",{staticClass:"card-title"},[a("router-link",{attrs:{to:"/detail/"+t.movie.id}},[t._v(t._s(t.movie.title))])],1),a("p",{staticClass:"card-text"},[t._v(" Rating: "+t._s(t.movie.rating))]),a("p",{staticClass:"card-text"},[t._v(" Genre: "+t._s(t.movie.Genre.name))]),t.email?a("a",{staticClass:"btn btn-primary",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.addToBookmark(t.movie.id)}}},[a("i",{staticClass:"fas fa-heart fa-lg mr-2",attrs:{"aria-hidden":"true"}})]):t._e()])])])},T=[],O={name:"MoviesItem",props:["movie"],data:function(){return{id:0}},computed:{email:function(){return this.$store.state.email}},methods:{addToBookmark:function(t){this.$store.dispatch("addBookmark",t)}},created:function(){this.$store.dispatch("getqrCode")}},M=O,P=(0,f.Z)(M,S,T,!1,null,null,null),w=P.exports,q={name:"MoviesList",components:{MoviesItem:w},data:function(){return{query:{page:1,title:"",genre:"",clear:!1}}},computed:{movies:function(){return this.$store.state.movies},totalPage:function(){return this.$store.state.totalPage}},methods:{nextPage:function(t){this.query.page=t,this.$store.dispatch("MoviesPage",this.query)},addToBookmark:function(t){this.$store.dispatch("addBookmark",t)},search:function(){this.query.page=1,this.query.clear=!0,this.$store.dispatch("MoviesPage",this.query)},clearSearch:function(){this.page=0,this.query.title="",this.query.genre="",this.query.clear=!1,this.$store.dispatch("MoviesPage",this.query)}},created:function(){this.$store.commit("SET_EMAIL",localStorage.getItem("email")),this.$store.dispatch("getMovies"),this.$store.dispatch("MoviesPage",this.query)}},I=q,A=(0,f.Z)(I,C,E,!1,null,null,null),B=A.exports,$={name:"HomePage",components:{MoviesList:B}},x=$,L=(0,f.Z)(x,k,y,!1,null,null,null),N=L.exports;n.Z.use(_.Z);var U=[{path:"/",name:"home",component:N},{path:"/login",name:"login",component:function(){return a.e(735).then(a.bind(a,6735))}},{path:"/mybookmark",name:"BookmarkPage",component:function(){return a.e(471).then(a.bind(a,471))}},{path:"/register",name:"register",component:function(){return a.e(125).then(a.bind(a,1125))}},{path:"/detail/:id",name:"detail",component:function(){return a.e(129).then(a.bind(a,7129))}}],Z=new _.Z({mode:"history",base:"/",routes:U});Z.beforeEach((function(t,e,a){localStorage.getItem("access_token")&&"login"===t.name||localStorage.getItem("access_token")&&"register"===t.name?a({name:"home"}):localStorage.getItem("access_token")||"BookmarkPage"!==t.name?a():a({name:"home"})}));var j=Z,G=(a(2222),a(4665)),R=a(6166),D=a.n(R);n.Z.use(G.ZP);var F=new G.ZP.Store({state:{baseUrl:"https://biskopkece.herokuapp.com",email:"",movies:[],bookmark:[],totalPage:0,movie:[],qrcode:[]},mutations:{SET_EMAIL:function(t,e){t.email=e},SET_MOVIES:function(t,e){t.movies=e},SET_BOOKMARK:function(t,e){t.bookmark=e},SET_TOTALPAGE:function(t,e){t.totalPage=e},SET_MOVIE:function(t,e){t.movie=e},SET_QRCODE:function(t,e){t.qrcode=e}},actions:{login:function(t,e){return D()({url:"".concat(this.state.baseUrl,"/customers/login"),method:"POST",data:e})},onSignIn:function(t,e){var a=this;D()({url:"".concat(this.state.baseUrl,"/customers/google-sign-in"),method:"POST",data:{id_token:e}}).then((function(e){var n=e.data;localStorage.setItem("access_token",n.access_token),localStorage.setItem("email",n.email),t.commit("SET_EMAIL",n.email),l().fire({icon:"success",title:"Welcome to ".concat(a.data.email),showConfirmButton:!1,timer:1500})})).catch((function(t){console.log(t.response)}))},register:function(t,e){D()({url:"".concat(this.state.baseUrl,"/customers/register"),method:"POST",data:{email:e.email,password:e.password,phoneNumber:e.phoneNumber,address:e.address}}).then((function(){l().fire({icon:"success",title:"Register Success",showConfirmButton:!1,timer:1500})})).catch((function(t){l().fire({icon:"error",title:"Oops...",text:t.response.data.messages})}))},getMovies:function(t){D()({url:"".concat(this.state.baseUrl,"/movies/pub/pag"),method:"GET"}).then((function(e){var a=e.data;t.commit("SET_MOVIES",a.Movies),t.commit("SET_TOTALPAGE",a.totalPages)})).catch((function(t){console.log(t)}))},MoviesPage:function(t,e){D()({url:"".concat(this.state.baseUrl,"/movies/pub/pag?page=").concat(e.page,"&genre=").concat(e.genre,"&title=").concat(e.title),method:"GET"}).then((function(e){var a=e.data;t.commit("SET_MOVIES",a.Movies),t.commit("SET_TOTALPAGE",a.totalPage)})).catch((function(t){console.log(t)}))},addBookmark:function(t,e){D()({url:"".concat(this.state.baseUrl,"/movies/").concat(e,"/bookmark"),method:"POST",headers:{access_token:localStorage.getItem("access_token")}}).then((function(t){var e=t.data;l().fire({icon:"success",title:"Movie with id ".concat(e.data.movieId," added to bookmark"),showConfirmButton:!1,timer:1500})})).catch((function(t){var e=t.response.data.messages;l().fire({icon:"error",title:e,showConfirmButton:!1,timer:1500})}))},getBookmark:function(t){D()({url:"".concat(this.state.baseUrl,"/movies/bookmark"),method:"GET",headers:{access_token:localStorage.getItem("access_token")}}).then((function(e){var a=e.data;localStorage.setItem("email",a[0].User.email),t.commit("SET_EMAIL",a[0].User.email),t.commit("SET_BOOKMARK",a)})).catch((function(t){console.log(t)}))},detailMovies:function(t,e){D()({url:"".concat(this.state.baseUrl,"/movies/pub/").concat(e),method:"GET"}).then((function(e){var a=e.data;t.commit("SET_MOVIE",a.movie)})).catch((function(t){console.log(t)}))},getqrCode:function(t,e){D()({url:"https://api.happi.dev/v1/qrcode?data=".concat(this.state.baseUrl,"/detail/").concat(e,"&width=&dots=000000&bg=FFFFFF&apikey=ddbf4bZrnLOMh3TboEIceE7urXDLqrwqRBGGl0zIdYNaD31ckNpTIybR"),method:"GET"}).then((function(e){var a=e.data;console.log(a.qrcode),t.commit("SET_QRCODE",a.qrcode)})).catch((function(t){l().fire({icon:"error",title:"QR CODE ERROR",showConfirmButton:!1,timer:1500})}))}}});n.Z.prototype.$baseUrl="http://localhost:3000",n.Z.config.productionTip=!1,new n.Z({render:function(t){return t(b)},store:F,router:j}).$mount("#app")}},e={};function a(n){var o=e[n];if(void 0!==o)return o.exports;var r=e[n]={exports:{}};return t[n].call(r.exports,r,r.exports,a),r.exports}a.m=t,function(){var t=[];a.O=function(e,n,o,r){if(!n){var i=1/0;for(u=0;u<t.length;u++){n=t[u][0],o=t[u][1],r=t[u][2];for(var s=!0,c=0;c<n.length;c++)(!1&r||i>=r)&&Object.keys(a.O).every((function(t){return a.O[t](n[c])}))?n.splice(c--,1):(s=!1,r<i&&(i=r));if(s){t.splice(u--,1);var l=o();void 0!==l&&(e=l)}}return e}r=r||0;for(var u=t.length;u>0&&t[u-1][2]>r;u--)t[u]=t[u-1];t[u]=[n,o,r]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var n in e)a.o(e,n)&&!a.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){a.f={},a.e=function(t){return Promise.all(Object.keys(a.f).reduce((function(e,n){return a.f[n](t,e),e}),[]))}}(),function(){a.u=function(t){return"js/"+t+"-legacy."+{125:"92dc7a08",129:"daac57d3",471:"61105852",735:"2975ab53"}[t]+".js"}}(),function(){a.miniCssF=function(t){return"css/"+t+".dbbef820.css"}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="movie:";a.l=function(n,o,r,i){if(t[n])t[n].push(o);else{var s,c;if(void 0!==r)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var m=l[u];if(m.getAttribute("src")==n||m.getAttribute("data-webpack")==e+r){s=m;break}}s||(c=!0,s=document.createElement("script"),s.charset="utf-8",s.timeout=120,a.nc&&s.setAttribute("nonce",a.nc),s.setAttribute("data-webpack",e+r),s.src=n),t[n]=[o];var f=function(e,a){s.onerror=s.onload=null,clearTimeout(d);var o=t[n];if(delete t[n],s.parentNode&&s.parentNode.removeChild(s),o&&o.forEach((function(t){return t(a)})),e)return e(a)},d=setTimeout(f.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=f.bind(null,s.onerror),s.onload=f.bind(null,s.onload),c&&document.head.appendChild(s)}}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){a.p="/"}(),function(){var t=function(t,e,a,n){var o=document.createElement("link");o.rel="stylesheet",o.type="text/css";var r=function(r){if(o.onerror=o.onload=null,"load"===r.type)a();else{var i=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.href||e,c=new Error("Loading CSS chunk "+t+" failed.\n("+s+")");c.code="CSS_CHUNK_LOAD_FAILED",c.type=i,c.request=s,o.parentNode.removeChild(o),n(c)}};return o.onerror=o.onload=r,o.href=e,document.head.appendChild(o),o},e=function(t,e){for(var a=document.getElementsByTagName("link"),n=0;n<a.length;n++){var o=a[n],r=o.getAttribute("data-href")||o.getAttribute("href");if("stylesheet"===o.rel&&(r===t||r===e))return o}var i=document.getElementsByTagName("style");for(n=0;n<i.length;n++){o=i[n],r=o.getAttribute("data-href");if(r===t||r===e)return o}},n=function(n){return new Promise((function(o,r){var i=a.miniCssF(n),s=a.p+i;if(e(i,s))return o();t(n,s,o,r)}))},o={143:0};a.f.miniCss=function(t,e){var a={125:1};o[t]?e.push(o[t]):0!==o[t]&&a[t]&&e.push(o[t]=n(t).then((function(){o[t]=0}),(function(e){throw delete o[t],e})))}}(),function(){var t={143:0};a.f.j=function(e,n){var o=a.o(t,e)?t[e]:void 0;if(0!==o)if(o)n.push(o[2]);else{var r=new Promise((function(a,n){o=t[e]=[a,n]}));n.push(o[2]=r);var i=a.p+a.u(e),s=new Error,c=function(n){if(a.o(t,e)&&(o=t[e],0!==o&&(t[e]=void 0),o)){var r=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;s.message="Loading chunk "+e+" failed.\n("+r+": "+i+")",s.name="ChunkLoadError",s.type=r,s.request=i,o[1](s)}};a.l(i,c,"chunk-"+e,e)}},a.O.j=function(e){return 0===t[e]};var e=function(e,n){var o,r,i=n[0],s=n[1],c=n[2],l=0;if(i.some((function(e){return 0!==t[e]}))){for(o in s)a.o(s,o)&&(a.m[o]=s[o]);if(c)var u=c(a)}for(e&&e(n);l<i.length;l++)r=i[l],a.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return a.O(u)},n=self["webpackChunkmovie"]=self["webpackChunkmovie"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=a.O(void 0,[998],(function(){return a(9488)}));n=a.O(n)})();
//# sourceMappingURL=app-legacy.2f9cebc6.js.map